<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <style>
      .navbar-brand {
        text-shadow: 1px 4px 10px;
        font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
        font-style: italic;
      }
      body {
        background-color: grey;
      }
      .main-row {
        height: 10vh;
      }

      .main-col {
        max-width: 500px;
        min-height: 300px;
      }

      .todo-done {
        text-decoration: line-through;
      }
    </style>
  </head>

  <body>
    <nav
      style="height: 10%"
      class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top"
    >
      <div class="container-fluid">
        <a href="#" class="navbar-brand pr-5"
          ><img
            src="yemek_logo.png"
            alt=""
            style="margin-right: 20px; float: left; width: 40px; height: 40px"
          />
          <p style="margin-top: 8px; display: inline-block">TarifiniBul</p>
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active bg-success" href="index2.html"
                >Anasayfa</a
              >
            </li>

            <li class="nav-item">
              <a class="nav-link" href="iletisim.html">İletişim</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="todoList.html">Tarif Ekle</a>
            </li>

            <li class="nav-item dropright">
              <a class="nav-link d-inline-block" href="#menu"
                >Yemek ve Tarifleri
              </a>

              <div class="d-inline-block btn-group">
                <button
                  type="button"
                  class="
                    btn btn-dark
                    dropdown-toggle
                    d-inline-block
                    btn-outline-light
                  "
                  data-toggle="dropdown"
                ></button>
                <div class="dropdown-menu bg-dark">
                  <a
                    href="slider2.html"
                    class="dropdown-item text-light bg-dark"
                    >Türk Mutfağı</a
                  >
                  <a
                    href="slider3.html"
                    class="dropdown-item text-light bg-dark"
                    >Dünya Mutfağı</a
                  >
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="user" style="width: 100px">
          <a href="login.html"
            ><i
              class="fas fa-user ml-5 d-inline-block"
              style="font-size: 25px; color: white"
            ></i
          ></a>
        </div>
      </div>
    </nav>
    <br /><br /><br /><br /><br />

    <div
      class="
        h-100
        w-full
        flex
        items-center
        justify-center
        bg-teal-lightest
        font-sans
        mt-20
      "
    >
      <div class="bg-white rounded shadow p-6 m-4 w-full lg:w-3/4 lg:max-w-lg">
        <div class="mb-4">
          <h1 class="text-3xl md:text-4xl text-indigo-600 font-medium mb-2">
            Malzemeler
          </h1>
          <div class="flex mt-4">
            <input
              class="
                shadow
                appearance-none
                border
                rounded
                w-full
                py-2
                px-3
                mr-4
                text-grey-darker
              "
              name="text"
              id="text"
              placeholder="Add Todo"
            />
            <input type="hidden" id="saveIndex" />
            <button
              class="
                p-2
                lg:px-4
                md:mx-2
                text-center
                border border-solid border-indigo-600
                rounded
                text-white
                bg-indigo-600
                transition-colors
                duration-300
                mt-1
                md:mt-0 md:ml-1
              "
              id="add-task-btn"
            >
              Ekle
            </button>
            <button
              class="
                p-2
                lg:px-4
                md:mx-2
                text-center
                border border-solid border-indigo-600
                rounded
                bg-indigo-600
                text-white
                transition-colors
                duration-300
                mt-1
                md:mt-0 md:ml-1
              "
              style="display: none"
              id="save-todo-btn"
            >
              Düzenle
            </button>
          </div>
        </div>
        <div id="listBox"></div>
      </div>
    </div>

    <br /><br /><br />

    <div class="container">
      <div class="row justify-content-center align-items-center main-row">
        <div class="col shadow main-col bg-white">
          <div class="row bg-primary text-white">
            <div class="col p-2">
              <h4>Tarifler</h4>
            </div>
          </div>
          <div class="row justify-content-between text-white p-2">
            <div class="form-group flex-fill mb-2">
              <input
                id="todo-input"
                type="text"
                class="form-control"
                value=""
              />
            </div>
            <button
              type="button"
              onclick="CreateTodo();"
              class="btn btn-primary mb-2 ml-2"
            >
              Ekle
            </button>
          </div>
          <div class="row" id="todo-container"></div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row d-flex justify-content-center">
        <button id="submit" type="button" class="btn btn-primary">
          Gönder
        </button>
      </div>
    </div>

    <script>
      const submitButton = document.getElementById("submit");
      submitButton.addEventListener("click", () => {
        alert("Form başarıyla eklendi");
      });
      const text = document.getElementById("text");
      const addTaskButton = document.getElementById("add-task-btn");
      const saveTaskButton = document.getElementById("save-todo-btn");
      const listBox = document.getElementById("listBox");
      const saveInd = document.getElementById("saveIndex");

      let todoArray = [];

      addTaskButton.addEventListener("click", (e) => {
        e.preventDefault();
        let todo = localStorage.getItem("todo");
        if (todo === null) {
          todoArray = [];
        } else {
          todoArray = JSON.parse(todo);
        }
        todoArray.push(text.value);
        text.value = "";
        localStorage.setItem("todo", JSON.stringify(todoArray));
        displayTodo();
      });

      function displayTodo() {
        let todo = localStorage.getItem("todo");
        if (todo === null) {
          todoArray = [];
        } else {
          todoArray = JSON.parse(todo);
        }
        let htmlCode = "";
        todoArray.forEach((list, ind) => {
          htmlCode += `<div class='flex mb-4 items-center'>
   <p class='w-full text-grey-darkest'>${list}</p>
   <button onclick='edit(${ind})' class='flex-no-shrink p-2 ml-4 mr-2 border-2 rounded text-white text-grey bg-green-600'>Edit</button>
   <button onclick='deleteTodo(${ind})' class='flex-no-shrink p-2 ml-2 border-2 rounded text-white bg-red-500'>Delete</button>
</div>`;
        });
        listBox.innerHTML = htmlCode;
      }

      function deleteTodo(ind) {
        let todo = localStorage.getItem("todo");
        todoArray = JSON.parse(todo);
        todoArray.splice(ind, 1);
        localStorage.setItem("todo", JSON.stringify(todoArray));
        displayTodo();
      }

      function edit(ind) {
        saveInd.value = ind;
        let todo = localStorage.getItem("todo");
        todoArray = JSON.parse(todo);
        text.value = todoArray[ind];
        addTaskButton.style.display = "none";
        saveTaskButton.style.display = "block";
      }

      saveTaskButton.addEventListener("click", () => {
        let todo = localStorage.getItem("todo");
        todoArray = JSON.parse(todo);
        let id = saveInd.value;
        todoArray[id] = text.value;
        addTaskButton.style.display = "block";
        saveTaskButton.style.display = "none";
        text.value = "";
        localStorage.setItem("todo", JSON.stringify(todoArray));
        displayTodo();
      });

      saveTaskButton.addEventListener("click", () => {
        let todo = localStorage.getItem("todo");
        todoArray = JSON.parse(todo);
        let id = saveInd.value;
        todoArray[id] = text.value;
        addTaskButton.style.display = "block";
        saveTaskButton.style.display = "none";
        text.value = "";
        localStorage.setItem("todo", JSON.stringify(todoArray));
        displayTodo();
      });

      var todos = [{ text: "", done: false, id: 0 }];

      var currentTodo = {
        text: "",
        done: false,
        id: 0,
      };

      document.getElementById("todo-input").oninput = function (e) {
        currentTodo.text = e.target.value;
      };

      /*
//jQuery Version
$('#todo-input').on('input',function(e){
    currentTodo.text = e.target.value;
   });
*/

      function DrawTodo(todo) {
        var newTodoHTML = `
  <div class="col col-12 p-2 todo-item" todo-id="${todo.id}">
  <div class="input-group">
  <div class="input-group-prepend">
    <div class="input-group-text">
      <input type="checkbox" onchange="TodoChecked(${
        todo.id
      })" aria-label="Checkbox for following text input" ${
          todo.done && "checked"
        } >
    </div>
  </div>
  <input type="text" readonly class="form-control ${
    todo.done && "todo-done"
  } " aria-label="Text input with checkbox"
    value="${todo.text}">
  <div class="input-group-append">
    <button todo-id="${
      todo.id
    }" class="btn btn-outline-secondary bg-danger text-white" type="button" onclick="DeleteTodo(this);"
      id="button-addon2 ">X</button>
  </div>
  </div>
  </div>
  `;

        var dummy = document.createElement("DIV");
        dummy.innerHTML = newTodoHTML;
        document
          .getElementById("todo-container")
          .appendChild(dummy.children[0]);

        /*
    //jQuery version
     var newTodo = $.parseHTML(newTodoHTML);
     $("#todo-container").append(newTodo);
    */
      }

      function RenderAllTodos() {
        var container = document.getElementById("todo-container");
        while (container.firstChild) {
          container.removeChild(container.firstChild);
        }
        /*
    //jQuery version
      $("todo-container").empty();
    */

        for (var i = 0; i < todos.length; i++) {
          DrawTodo(todos[i]);
        }
      }

      RenderAllTodos();

      function DeleteTodo(button) {
        var deleteID = parseInt(button.getAttribute("todo-id"));
        /*
    //jQuery version
      var deleteID = parseInt($(button).attr("todo-id"));
    */

        for (let i = 0; i < todos.length; i++) {
          if (todos[i].id === deleteID) {
            todos.splice(i, 1);
            RenderAllTodos();
            break;
          }
        }
      }

      function TodoChecked(id) {
        todos[id].done = !todos[id].done;
        RenderAllTodos();
      }

      function CreateTodo() {
        newtodo = {
          text: currentTodo.text,
          done: false,
          id: todos.length,
        };
        todos.push(newtodo);
        RenderAllTodos();
      }
    </script>

    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>

    <!-- Code injected by live-server -->
    <script type="text/javascript">
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != "string") ||
                rel.length == 0 ||
                rel.toLowerCase() == "stylesheet"
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href =
                  url +
                  (url.indexOf("?") >= 0 ? "&" : "?") +
                  "_cacheOverride=" +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === "http:" ? "ws://" : "wss://";
          var address =
            protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
          ) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error(
          "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading."
        );
      }
      // ]]>
    </script>
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

    <script
      src="https://kit.fontawesome.com/599c95b460.js"
      crossorigin="anonymous"
    ></script>

    <script src="js/slider2.js" type="text/javascript"></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
